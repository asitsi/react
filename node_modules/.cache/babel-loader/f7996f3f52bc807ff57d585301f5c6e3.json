{"ast":null,"code":"var _jsxFileName = \"E:\\\\test\\\\frontend\\\\src\\\\core\\\\Polls\\\\MainPoll.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Poll from \"react-polls\";\nimport \"../../styles.scss\";\nimport { Link } from \"react-router-dom\";\nimport { isAutheticated } from \"../../auth/helper/index\";\nimport { getPolls, postPoll } from \"../helper/coreapicalls\";\nimport axios from \"axios\";\nimport { API } from \"../../backend\";\nimport { useHistory } from \"react-router-dom\";\nimport Test from \"./Test\";\n\nconst MainPoll = () => {\n  const userId = isAutheticated() && isAutheticated().user._id;\n\n  const [polls, setPoll] = useState([]);\n  const [error, seterror] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    loadPoll();\n  }, [polls]);\n\n  const loadPoll = () => {\n    getPolls().then(data => {\n      if (data.error) {\n        seterror(data.error);\n      } else {\n        setPoll(data.reverse());\n        console.log(data);\n      }\n    });\n  }; // Handling user vote\n  // Increments the votes count of answer when the user votes\n\n\n  const handalchange = async (pollId, userId, answer) => {\n    if (userId === false || 0) {\n      history.push(\"/signin\");\n    } else {\n      console.log(pollId);\n      console.log(userId); // getting\n\n      console.log(answer); // getting\n\n      await axios.post(`${API}/vote/${pollId}`, {\n        userId,\n        answer\n      }).then(data => {\n        if (data.error) {\n          seterror(data.error);\n          console.log(data.error);\n        } else {\n          loadPoll(); // console.log(data);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"blog_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Poll's of the Day\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row PollsHeight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Test, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: \"/allpolls\",\n    className: \"ForMorebtn container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"For More\")));\n};\n\nexport default MainPoll;","map":{"version":3,"sources":["E:/test/frontend/src/core/Polls/MainPoll.js"],"names":["React","useState","useEffect","Poll","Link","isAutheticated","getPolls","postPoll","axios","API","useHistory","Test","MainPoll","userId","user","_id","polls","setPoll","error","seterror","history","loadPoll","then","data","reverse","console","log","handalchange","pollId","answer","push","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Poll from \"react-polls\";\r\nimport \"../../styles.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { isAutheticated } from \"../../auth/helper/index\";\r\nimport { getPolls, postPoll } from \"../helper/coreapicalls\";\r\nimport axios from \"axios\";\r\nimport { API } from \"../../backend\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Test from \"./Test\";\r\n\r\nconst MainPoll = () => {\r\n  const userId = isAutheticated() && isAutheticated().user._id;\r\n  const [polls, setPoll] = useState([]);\r\n  const [error, seterror] = useState(false);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    loadPoll();\r\n  }, [polls]);\r\n\r\n  const loadPoll = () => {\r\n    getPolls().then((data) => {\r\n      if (data.error) {\r\n        seterror(data.error);\r\n      } else {\r\n        setPoll(data.reverse());\r\n        console.log(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Handling user vote\r\n  // Increments the votes count of answer when the user votes\r\n  const handalchange = async (pollId, userId, answer) => {\r\n    if (userId === false || 0) {\r\n      history.push(\"/signin\");\r\n    } else {\r\n      console.log(pollId);\r\n      console.log(userId); // getting\r\n      console.log(answer); // getting\r\n      await axios\r\n        .post(`${API}/vote/${pollId}`, { userId, answer })\r\n        .then((data) => {\r\n          if (data.error) {\r\n            seterror(data.error);\r\n            console.log(data.error);\r\n          } else {\r\n            loadPoll();\r\n            // console.log(data);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <div className=\"container \">\r\n        <h1 className=\"blog_heading\">Poll's of the Day</h1>\r\n        <div className=\"row PollsHeight\">\r\n          <Test />\r\n        </div>\r\n        <Link to=\"/allpolls\" className=\"ForMorebtn container\">\r\n          For More\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainPoll;\r\n"]},"metadata":{},"sourceType":"module"}